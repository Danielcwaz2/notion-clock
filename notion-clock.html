<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Notion Clock</title>
<style>
  :root{
    /* RED digits by default; transparent bg */
    --fg:#ff1a1a;        /* <- digit color */
    --bg:transparent;    /* <- transparent background */
    --accent:#ff8080;    /* date dot accent */
    --font: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    --weight: 800;       /* bolder for clarity */
    --radius: 12px;
    --pad: 16px;
    --size: 72px;        /* bigger for readability */
    --date-size: 14px;
    --letter: 0.02em;
    --shadow: none;      /* no card shadow so it floats on Notion */
    --glow: 0 0 6px rgba(255,0,0,.35), 0 0 18px rgba(255,0,0,.15);
  }
  html,body{height:100%}
  body{
    margin:0; display:grid; place-items:center;
    background:var(--bg); color:var(--fg); font-family:var(--font)
  }
  .card{ padding:var(--pad); border-radius:var(--radius); background:var(--bg) }
  .time{
    display:flex; gap:.25ch; align-items:baseline; justify-content:center;
    font-weight:var(--weight); font-size:var(--size); letter-spacing:var(--letter); line-height:1.05; white-space:nowrap;
    text-shadow: var(--glow); /* soft glow for clarity on light/dark pages */
  }
  .ampm{font-size:calc(var(--size)*.35); font-weight:700; opacity:.9; margin-left:.25ch; text-shadow: var(--glow)}
  .date{margin-top:.35rem; text-align:center; font-size:var(--date-size); opacity:.9; text-shadow: var(--glow)}
  .dots{color:var(--accent); padding:0 .25ch; user-select:none}
  .tz{margin-top:.2rem; text-align:center; font-size:12px; opacity:.7}
  @media (max-width:400px){ :root{ --size: 56px; --pad:14px } }
  @media (max-width:300px){ :root{ --size: 44px; --pad:10px } }
</style>
</head>
<body>
  <div class="card" id="wrap">
    <div class="time" id="time">
      <span id="hh">--</span><span>:</span><span id="mm">--</span>
      <span id="secwrap" style="display:none"><span>:</span><span id="ss">--</span></span>
      <span class="ampm" id="ampm" style="display:none">AM</span>
    </div>
    <div class="date" id="date">—</div>
    <div class="tz" id="tzline"></div>
  </div>

<script>
/* URL params:
   tz=America/New_York  h24=1|0  seconds=1  showTZ=1
   fg, bg, accent, size, weight, dateSize, radius, pad, letter
   (Note: # must be encoded as %23 in URLs)
*/
const q = new URLSearchParams(location.search);
const $ = id => document.getElementById(id);
const root = document.documentElement;
const setVar = (k,v)=> v && root.style.setProperty(k, v);

setVar('--fg', q.get('fg'));
setVar('--bg', q.get('bg'));
setVar('--accent', q.get('accent'));
setVar('--size', q.get('size'));
setVar('--date-size', q.get('dateSize'));
setVar('--weight', q.get('weight'));
setVar('--radius', q.get('radius'));
setVar('--pad', q.get('pad'));
setVar('--letter', q.get('letter'));

const tz = q.get('tz') || Intl.DateTimeFormat().resolvedOptions().timeZone;
const h24 = q.get('h24') === '1';
const showSeconds = q.get('seconds') === '1';
const showTZ = q.get('showTZ') === '1';

if (showSeconds) $('secwrap').style.display = '';
if (!h24) $('ampm').style.display = '';

function pad(n){ return String(n).padStart(2,'0'); }

function render(){
  try{
    const now = new Date();
    const parts = new Intl.DateTimeFormat('en-US', {
      timeZone: tz, hour12: !h24,
      hour:'numeric', minute:'numeric', second: showSeconds ? 'numeric' : undefined
    }).formatToParts(now).reduce((a,p)=> (a[p.type]=p.value, a), {});
    let h = parts.hour || '--';
    let m = parts.minute || '--';
    let s = parts.second || '--';
    let ap = parts.dayPeriod || '';

    if (h24) h = pad(h); m = pad(m); if (showSeconds) s = pad(s);

    $('hh').textContent = h;
    $('mm').textContent = m;
    if (showSeconds) $('ss').textContent = s;
    if (!h24) $('ampm').textContent = (ap||'').toUpperCase();

    // Date line: Tue • Oct 7, 2025
    const dParts = new Intl.DateTimeFormat('en-US', {
      timeZone: tz, weekday:'short', month:'short', day:'numeric', year:'numeric'
    }).formatToParts(now).reduce((a,p)=> (a[p.type]=p.value, a), {});
    $('date').innerHTML = `${dParts.weekday||''}<span class="dots"> • </span>${dParts.month||''} ${dParts.day||''}, ${dParts.year||''}`;

    $('tzline').textContent = showTZ ? tz : '';
  }catch(e){
    $('date').textContent = 'Invalid time zone';
  }
}
render();
setInterval(render, 250);
</script>
</body>
</html>
